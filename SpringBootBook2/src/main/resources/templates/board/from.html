<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link rel="stylesheet" th:href="@{/css/base.css}"/>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
    <title>Board From</title>
</head>
<body>

<!-- SECTION: HEADER
====================================================================== -->
<div th:fragment="header">
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button aria-expanded="false" class="navbar-toggle collapsed"
                        data-target="#bs-example-navbar-collapse-1"
                        data-toggle="collapse" type="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/" style="text-decoration:none;">
                    <img class="img-rounded" style="display:inline-block;height:100%;margin-right:5px"
                         th:src="@{/images/spring_boot_gray.png}"/>
                    <span style="vertical-align:middle;">SpringBoot Community Web</span>
                </a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/logout">LOGOUT</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

<!-- SECTION: HEADER -->

<!--body-->
<div class="container">
    <div class="page-header">
        <h1>게시글 등록</h1>
    </div>
    <br/>
    <input id="board_id" th:value="${board?.id}" type="hidden"/>
    <table class="table">
        <tr>
            <th style="padding:13px 0 0 15px">게시판 선택</th>
            <td>
                <div class="pull-left">
                    <select class="form-control input-sm" id="board_type">
                        <option>--분류--</option>
                        <option th:selected="${board?.boardType}" th:value="notice">공지사항</option>
                        <option th:selected="${board?.boardType}" th:value="free">자유게시판</option>
                    </select>
                </div>
            </td>
        </tr>
        <tr th:style="${board.createdDate} == null ? 'display:none'">
            <th style="padding: 13px 0 0 15px">생성 날짜</th>
            <td>
                <input
                        class="col-md-1 form-control input-sm" readonly="readonly"
                        th:value="${board?.createdDate} ?
                        ${#temporals.format(board.createdDate, 'yyyy-MM-dd HH:mm')} : ${board?.createdDate}"
                        type="text"></td>
            </td>
        </tr>
        <tr>
            <th style="padding:13px 0 0 15px;">제목</th>
            <td><input class="col-md-1 form-control input-sm" id="board_title" th:value="${board?.title}" type="text"/>
            </td>
        </tr>
        <tr>
            <th style="padding:13px 0 0 15px;">부제목</th>
            <td><input class="col-md-1 form-control input-sm" id="board_sub_title" th:value="${board?.subTitle}"
                       type="text"/></td>
        </tr>
        <tr>
            <th style="padding:13px 0 0 15px;">내용</th>
            <td><textarea class="col-md-1 form-control input-sm" id="board_content" maxlength="140" rows="7"
                          style="height: 200px;"
                          th:text="${board?.content}"></textarea><span class="help-block"></span>
            </td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
    </table>
    <div class="pull-left">
        <a class="btn btn-default" href="/board/list">목록으로</a>
    </div>
    <div class="pull-right">
        <button class="btn btn-primary" id="insert" th:id="postBtn" type="button">저장</button>
        <button class="btn btn-info" id="update" type="button">수정</button>
        <button class="btn btn-danger" id="delete" type="button">삭제</button>
    </div>
</div>
<!--/body-->

<!--footer-->
<footer class="footer">
    <div class="container">
        <p>Copyright 2017 young891221. All Right Reserved. Designed by ssosso</p>
    </div>
</footer>
<!--/footer-->

<script th:src="@{/js/jquery.min.js}"></script>
<script>
    $('#postBtn').click(function () {
        var jsonData = JSON.stringify({
            id: $('#board_id').val(),
            title: $('#board_title').val(),
            subTitle: $('#board_sub_title').val(),
            content: $('#board_content').val()
        });
        $.ajax({
            url: "/a/post",
            type: "POST",
            data: jsonData,
            headers: {
                "Accept": "application/json",
                "Content-Type": "application/json"
            },
            dataType: "json",
            success: function (data) {
            },
            error: function () {
            }
        });
    });
</script>
</body>
</html>